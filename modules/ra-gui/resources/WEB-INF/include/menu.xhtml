<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:component="http://java.sun.com/jsf/composite/component" 
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions" 
    xmlns:t="http://myfaces.apache.org/tomahawk">
<ui:remove>
    <!--
    /*************************************************************************
     *                                                                       *
     *  EJBCA: The OpenSource Certificate Authority                          *
     *                                                                       *
     *  This software is free software; you can redistribute it and/or       *
     *  modify it under the terms of the GNU Lesser General Public           *
     *  License as published by the Free Software Foundation; either         *
     *  version 2.1 of the License, or any later version.                    *
     *                                                                       *
     *  See terms of license at gnu.org.                                     *
     *                                                                       *
     *************************************************************************/

     version: $Id$
     -->
</ui:remove>
<h:body dir="#{raLocaleBean.direction}" styleClass="#{raLocaleBean.direction}Direction">
    <ui:composition>
        <h:panelGroup layout="block" class="pure-g">
            <h:panelGroup layout="block"  class="pure-u-1 pure-u-lg-1-8">
                   <h:panelGroup layout="block" class="pure-menu pure-menu-horizontal" >
                   <h:outputLink value="index.xhtml" styleClass="pure-menu-heading">
                        <img class="menu_logo" alt="EJBCA by PrimeKey" src="#{facesContext.externalContext.context.contextPath}/img/pk_logo.png" /> 
                   </h:outputLink>
                </h:panelGroup>
            </h:panelGroup>
            <h:panelGroup layout="block" class="pure-u-1 pure-u-md-1-2 pure-u-lg-13-24">
                <h:panelGroup layout="block" class="pure-menu pure-menu-horizontal">
                    <ul class="pure-menu-list">
                        <ui:fragment rendered="#{raAccessBean.authorizedToEnroll}">
                            <li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
                                <a href="#" id="enrollment" class="pure-menu-link enroll-menu-link">Enroll</a>
                                <ul class="pure-menu-children">
                                    <ui:fragment rendered="#{raAccessBean.authorizedToEnrollMakeRequest}">
                                    	<li class="pure-menu-item">
                                            <h:outputLink value="enrollmakenewrequest.xhtml" styleClass="pure-menu-link enroll-menu-link"><h:outputText value="#{msg.menu_pagetitle_enroll_make_new_request}"/></h:outputLink>
                                        </li>
                                    </ui:fragment><!--  Hiding until these items have been implemented
                                    <ui:fragment rendered="#{raAccessBean.authorizedToEnrollWithRequestId}">
                                        <li class="pure-menu-item"><a href="#" class="pure-menu-link enroll-menu-link">Enroll with Request ID</a></li>
                                    </ui:fragment>-->
                                    <ui:fragment rendered="#{raAccessBean.authorizedToEnrollSeeRequestStatus}">
                                        <li class="pure-menu-item"><a href="#" class="pure-menu-link enroll-menu-link">See Request Status</a></li>
                                    </ui:fragment><!-- Hiding until these items have been implemented
                                    <ui:fragment rendered="#{raAccessBean.authorizedToEnrollRenewBrowserCert}">
                                        <li class="pure-menu-item"><a href="#" class="pure-menu-link enroll-menu-link">Renew Browser Certificate</a></li>
                                    </ui:fragment>-->
                                </ul>
                            </li>
                        </ui:fragment>
                        <ui:fragment rendered="#{raAccessBean.authorizedToCas}">
                            <li class="pure-menu-item">
                                <h:outputLink value="cas.xhtml" styleClass="pure-menu-link cas-menu-link"><h:outputText value="#{msg.menu_pagetitle_cas}"/></h:outputLink>
                            </li>
                        </ui:fragment>
                        <ui:fragment rendered="#{raAccessBean.authorizedToManageRequests}">
                        	<li class="pure-menu-item">
                            	<h:outputLink value="managerequests.xhtml" styleClass="pure-menu-link requests-menu-link">
                            		<h:outputText value="#{msg.menu_pagetitle_manage_requests}"/>
                            	</h:outputLink>
                            </li>
                        </ui:fragment>
                        <ui:fragment rendered="#{raAccessBean.authorizedToSearch}">
                        	<li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
                                <a href="#" id="search" class="pure-menu-link search-menu-link">Search</a>
                                	<ul class="pure-menu-children">
                                    	<ui:fragment rendered="#{raAccessBean.authorizedToSearchCerts}">
                                        	<li class="pure-menu-item">
                                            	<h:outputLink value="search_certs.xhtml" styleClass="pure-menu-link search-menu-link">
                                            		<h:outputText value="#{msg.menu_pagetitle_search_certs}"/>
                                            	</h:outputLink>
                                       		</li>
                                    	</ui:fragment>
                                    	<ui:fragment rendered="#{raAccessBean.authorizedToSearchEndEntities}">
                                    		<li class="pure-menu-item">
                                     	    	<h:outputLink value="search_ees.xhtml" styleClass="pure-menu-link search-menu-link">
                                     	    		<h:outputText value="#{msg.menu_pagetitle_search_ees}"/>
                                     	    	</h:outputLink>
                                       		</li>
                                    	</ui:fragment>
                                	</ul>
                            	</li>
                        	</ui:fragment>
                        	<ui:remove>
                        	<!-- Not yet implemented for 6.6.0, but put here as a placeholder. 
                        <ui:fragment rendered="#{raAccessBean.authorizedToRoles}">
                            <li class="pure-menu-item">
                                <a href="#" id="rolesManagement" class="pure-menu-link">Roles Management</a>
                            </li>
                        </ui:fragment>
                        -->
                         </ui:remove>
                    </ul>
                </h:panelGroup>
            </h:panelGroup>
            <h:panelGroup layout="block" styleClass="pure-u-1 pure-u-lg-1-3">
                <h:panelGroup layout="block" styleClass="pure-menu pure-menu-horizontal" style="text-align: #{raLocaleBean.reverseIndentationDirection}">	             
                    <ul class="pure-menu-list">
                    	<li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
                        	<a href="#" id="language" class="pure-menu-link">Language</a>
                        	<ul class="pure-menu-children">
                        		<h:form>
	                        		<ui:repeat value="#{raLocaleBean.supportedLocales}" var="supportedLocale">
	                        			<li class="pure-menu-item">
	                        				<h:commandButton action="#{raLocaleBean.setLocale(supportedLocale)}" label="#{supportedLocale.language}" 
	                        					value="#{supportedLocale.getDisplayLanguage(supportedLocale)}" styleClass="pure-menu-item language_button"/> 
	                        			</li>         			
	                        		</ui:repeat>
                        		</h:form>
                        	</ul>
                        </li>
                        <li class="pure-menu-item pure-menu-allow-hover"><a href="#" class="pure-menu-link">Documentation</a></li>
                        <ui:fragment rendered="#{raAuthenticationBean.publicUser}">
                            <li class="pure-menu-item"><a href="#" class="pure-menu-link">Login</a></li>
                        </ui:fragment>
                        <ui:fragment rendered="#{!raAuthenticationBean.publicUser}">
                            <li class="pure-menu-item"><a href="#" id="search" class="pure-menu-link">Log out <h:outputText value="#{raAuthenticationBean.userDisplayName}"/></a></li>
                        </ui:fragment>
                    </ul>
                </h:panelGroup>
            </h:panelGroup>
        </h:panelGroup>
    </ui:composition>
</h:body>
</html>